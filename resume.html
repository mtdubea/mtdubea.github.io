<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, viewport-fit=cover"
  />
  <title>My Resume | Matthew Dubea</title>
  <meta name="description" content="View or download Matthew Dubea’s resume: education, engineering projects, technical expertise, process improvement, and professional experience." />
  <meta name="color-scheme" content="light dark" />
  <meta name="theme-color" content="#0a66c2" />
  <link rel="icon" href="assets/favicon.ico" type="image/x-icon" />
  <link rel="stylesheet" href="style.css" />
  <script defer src="theme.js"></script>

  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Person",
    "name":"Matthew Dubea",
    "jobTitle":"Mechanical Engineer",
    "url":"https://mtdubea.github.io/resume.html",
    "image":"https://mtdubea.github.io/assets/images/profile-headshot.jpg",
    "sameAs":["https://www.linkedin.com/in/mdubea/","https://github.com/mtdubea"]
  }
  </script>

  <style>
    /* Page-local polish that complements style.css */
    .resume-hero .cta-row { gap:.6rem; flex-wrap:wrap; justify-content:center; }
    .pdf-shell {
      max-width: 1200px;
      margin: 0 auto 2rem;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: .75rem;
      box-shadow: 0 10px 30px var(--shadow);
      overflow: hidden;
    }
    .pdf-actions {
      display:flex; flex-wrap:wrap; gap:.6rem; justify-content:center;
      margin: 0 auto 1rem; padding-top:.25rem;
    }
    .pdf-frame {
      width: 100%;
      height: min(82vh, 1100px);
      border: 0;
      display: block;
      background: #0b1220; /* dark backdrop for viewer chrome */
    }
    /* Shimmer while the PDF <object> lazy-loads */
    object.pdf-frame[data-src]:not([data]) {
      background: linear-gradient(90deg, #f3f4f6 25%, #e5e7eb 37%, #f3f4f6 63%);
      background-size: 400% 100%;
      animation: shimmer 1.2s infinite linear;
    }
    /* Mobile: show a tasteful placeholder + buttons when embeds are disabled */
    .no-embed .pdf-shell {
      padding: 1.25rem 1rem;
    }
    .no-embed .pdf-placeholder {
      text-align:center; color: var(--muted); margin: .5rem 0 1rem;
    }
  </style>
</head>

<body class="fade-in">
  <header class="site-header" role="banner">
    <div class="brand">
      <h1>Matthew Dubea</h1>
      <p class="tagline">Mechanical Engineer · Design · Fabrication · Automation</p>
    </div>
    <nav class="site-nav" aria-label="Primary">
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a class="active" href="resume.html" aria-current="page">Resume</a></li>
        <li><a href="reports.html">Reports</a></li>
        <li><a href="media/certifications.html">Certifications</a></li>
        <li class="theme-toggle">
          <button id="darkModeToggle" title="Toggle color theme" aria-label="Toggle color theme">🖥️</button>
        </li>
      </ul>
    </nav>
  </header>

  <main id="main">
    <!-- Hero -->
    <section class="hero resume-hero" aria-labelledby="resume-title">
      <h2 id="resume-title">📄 My Resume</h2>
      <p>
        View or download my latest resume showcasing academic achievements, engineering projects,
        technical expertise, and professional experience.
      </p>
      <div class="pdf-actions" role="group" aria-label="Resume actions (top)">
        <a class="btn primary" id="dlTop" href="Matthew_Dubea_Resume.pdf" download>📥 Download PDF</a>
        <a class="btn outline" id="openTop" href="Matthew_Dubea_Resume.pdf" target="_blank" rel="noopener">🔎 View Fullscreen</a>
      </div>
    </section>

    <!-- PDF Viewer -->
    <section class="pdf-shell" aria-label="Resume viewer">
      <!-- Desktop/tablet with PDF support: lazy-load the PDF into <object> -->
      <object id="pdfObject"
              class="pdf-frame"
              type="application/pdf"
              data=""
              data-src="Matthew_Dubea_Resume.pdf#view=FitH">
        <!-- If the browser cannot render the PDF, show this fallback surface -->
        <div style="padding:1rem;text-align:center">
          <p class="pdf-placeholder">Your browser can’t show the inline preview.</p>
          <div class="pdf-actions">
            <a class="btn primary" href="Matthew_Dubea_Resume.pdf" download>📥 Download PDF</a>
            <a class="btn outline" href="Matthew_Dubea_Resume.pdf" target="_blank" rel="noopener">🔎 View Fullscreen</a>
          </div>
        </div>
      </object>

      <!-- Mobile-only placeholder when embeds are disabled via JS -->
      <div id="mobilePlaceholder" hidden>
        <p class="pdf-placeholder">Inline preview is disabled on mobile for the best experience.</p>
        <div class="pdf-actions">
          <a class="btn primary" href="Matthew_Dubea_Resume.pdf" download>📥 Download PDF</a>
          <a class="btn outline" href="Matthew_Dubea_Resume.pdf" target="_blank" rel="noopener">🔎 View Fullscreen</a>
        </div>
      </div>
    </section>

    <!-- Bottom actions (mirrored) -->
    <section class="pdf-actions" role="group" aria-label="Resume actions (bottom)">
      <a class="btn primary" id="dlBottom" href="Matthew_Dubea_Resume.pdf" download>📥 Download PDF</a>
      <a class="btn outline" id="openBottom" href="Matthew_Dubea_Resume.pdf" target="_blank" rel="noopener">🔎 View Fullscreen</a>
    </section>

    <noscript>
      <p style="text-align:center;color:var(--muted);max-width:60ch;margin:1rem auto;">
        JavaScript is disabled. Use the buttons above to download or open the resume PDF.
      </p>
    </noscript>
  </main>

  <footer role="contentinfo">
    <p>© 2025 Matthew Dubea &nbsp;|&nbsp; <a href="mailto:mattdubea@outlook.com">mattdubea@outlook.com</a></p>
  </footer>

  <script>
    // Detect iOS and small screens where inline PDF embedding is unreliable.
    const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) ||
                  (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);
    const canInlinePDF = !isIOS && window.matchMedia('(min-width: 768px)').matches;

    const obj   = document.getElementById('pdfObject');
    const mobPh = document.getElementById('mobilePlaceholder');

    if (!canInlinePDF) {
      // Disable embeds for mobile/iOS → show clean fallback with buttons
      document.body.classList.add('no-embed');
      if (obj) obj.style.display = 'none';
      if (mobPh) mobPh.hidden = false;
    } else {
      // Lazy-load the PDF when the viewer scrolls near it
      const io = new IntersectionObserver(entries => {
        entries.forEach(e => {
          if (e.isIntersecting) {
            const src = obj.getAttribute('data-src');
            if (src && !obj.getAttribute('data')) {
              obj.setAttribute('data', src);
              io.unobserve(obj);
            }
          }
        });
      }, { rootMargin: '200px' });
      io.observe(obj);

      // If the PDF plug-in errors, swap to the embedded fallback surface
      obj?.addEventListener('error', () => {
        obj.outerHTML = `
          <div class="pdf-shell" style="padding:1rem;text-align:center">
            <p class="pdf-placeholder">Preview unavailable in this browser.</p>
            <div class="pdf-actions">
              <a class="btn primary" href="Matthew_Dubea_Resume.pdf" download>📥 Download PDF</a>
              <a class="btn outline" href="Matthew_Dubea_Resume.pdf" target="_blank" rel="noopener">🔎 View Fullscreen</a>
            </div>
          </div>`;
      });
    }
  </script>
</body>
</html>
