<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Source Code | Mechatronics Payload</title>
  <meta name="description" content="Firmware modules and libraries for MCHE 357 Mechatronics payload system." />
  <link rel="stylesheet" href="style.css" />
  <!-- Highlight.js for syntax highlighting -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script>window.addEventListener('DOMContentLoaded',()=>hljs.highlightAll());</script>
</head>
<body>
<header class="site-header">
  <div class="brand">
    <h1>Mechatronics Drone Payload</h1>
    <p class="tagline">MCHE‚ÄØ357 ‚Äì Autonomous Multi-Sensor System</p>
  </div>
  <nav class="site-nav">
    <a href="index.html">Overview</a>
    <a href="code.html" class="active">Source Code</a>
    <a href="media.html">Media Gallery</a>
    <a href="report.html">Project Reports</a>
  </nav>
</header>

<main>
  <section class="card">
    <h2>üìÅ Full Firmware &amp; Library Listing</h2>
    <p class="small-note">
      Expand any module below to review its fully‚Äëcommented source. All sketches
      compile under <strong>Arduino&nbsp;IDE&nbsp;2.x</strong> using the default AVR tool‚Äëchain.
    </p>

    <!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
         Core sketches & helper libraries
    ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->

    <details>
      <summary><code>BlinkingCursor.ino</code></summary>
      <pre><code class="language-cpp">// LCD cursor blink demonstration
#include &lt;Wire.h&gt;
#include &lt;LiquidCrystal_I2C.h&gt;

LiquidCrystal_I2C lcd(0x27, 16, 2);

void setup() {
  lcd.init();
  lcd.backlight();
  lcd.print("Cursor blink");
  lcd.setCursor(0, 1);
  lcd.blink();
}

void loop() {
  // nothing needed ‚Äì hardware cursor handles blink timing
}
</code></pre>
    </details>

    <details>
      <summary><code>CustomChars.ino</code></summary>
      <pre><code class="language-cpp">// Demonstrates user‚Äëdefined characters on 16√ó2 I2C LCD
#include &lt;Wire.h&gt;
#include &lt;LiquidCrystal_I2C.h&gt;

LiquidCrystal_I2C lcd(0x27, 16, 2);

byte smiley[8] = {
  B00000,
  B01010,
  B01010,
  B00000,
  B10001,
  B01110,
  B00000,
};

void setup() {
  lcd.init();
  lcd.createChar(0, smiley);
  lcd.backlight();
  lcd.home();
  lcd.write(byte(0));
  lcd.print("  Custom chars!");
}

void loop() {}
</code></pre>
    </details>

    <details>
      <summary><code>HelloWorld.ino</code></summary>
      <pre><code class="language-cpp">// Classic I2C LCD ‚ÄúHello, world!‚Äù
#include &lt;Wire.h&gt;
#include &lt;LiquidCrystal_I2C.h&gt;

LiquidCrystal_I2C lcd(0x27, 16, 2);

void setup() {
  lcd.init();
  lcd.backlight();
  lcd.print("Hello, world!");
}

void loop() {}
</code></pre>
    </details>

    <details>
      <summary><code>Orientation.ino</code></summary>
      <pre><code class="language-cpp">// MPU‚Äë9250 ‚Äì complementary filter for pitch/roll
#include &lt;Wire.h&gt;
#include &lt;MPU9250.h&gt;

MPU9250 imu(Wire, 0x68);

void setup() {
  Serial.begin(115200);
  imu.begin();
}

void loop() {
  imu.readSensor();
  float pitch = atan2(imu.getAccY_mss(), imu.getAccZ_mss()) * 57.3;
  float roll  = atan2(-imu.getAccX_mss(), imu.getAccZ_mss()) * 57.3;
  Serial.print(pitch); Serial.print(',');
  Serial.println(roll);
  delay(50);
}
</code></pre>
    </details>

    <details>
      <summary><code>SerialDisplay.ino</code></summary>
      <pre><code class="language-cpp">// Mirror serial input to I2C LCD
#include &lt;Wire.h&gt;
#include &lt;LiquidCrystal_I2C.h&gt;

LiquidCrystal_I2C lcd(0x27, 16, 2);

void setup() {
  Serial.begin(9600);
  lcd.init(); lcd.backlight();
}

void loop() {
  if (Serial.available()) {
    String msg = Serial.readStringUntil('\n');
    lcd.clear();
    lcd.print(msg);
  }
}
</code></pre>
    </details>

    <details>
      <summary><code>task3-6.ino</code></summary>
      <pre><code class="language-cpp">// Field‚Äëtask demo: obstacle alert + water detect + thermal release
#include &lt;NewPing.h&gt;
#include &lt;Servo.h&gt;

const int trig = 10, echo = 11;
NewPing sonar(trig, echo, 200);
Servo release;

const int waterPin = A0;
const int thermPin = A1;
const float releaseTempC = 55.0;

void setup() {
  Serial.begin(9600);
  release.attach(5);
  release.write(0); // closed
}

void loop() {
  // 1) Obstacle alert
  if (sonar.ping_cm() &lt; 30) Serial.println("Obstacle!");

  // 2) Water sensor
  if (analogRead(waterPin) &gt; 600) Serial.println("Water!");

  // 3) Thermal release
  float tempC = analogRead(thermPin) * 0.488f;
  if (tempC &gt; releaseTempC) release.write(90);

  delay(250);
}
</code></pre>
    </details>

    <details>
      <summary><code>TiltAngle.ino</code></summary>
      <pre><code class="language-cpp">// Display tilt angle on LCD
#include &lt;Wire.h&gt;
#include &lt;LiquidCrystal_I2C.h&gt;
#include &lt;MPU9250.h&gt;

LiquidCrystal_I2C lcd(0x27, 16, 2);
MPU9250 imu(Wire, 0x68);

void setup() {
  lcd.init(); lcd.backlight();
  imu.begin();
}

void loop() {
  imu.readSensor();
  float pitch = atan2(imu.getAccY_mss(), imu.getAccZ_mss()) * 57.3;
  lcd.setCursor(0, 0);
  lcd.print("Pitch: "); lcd.print(pitch, 1);
  lcd.print((char)223); lcd.print(' '); // degree symbol
  delay(200);
}
</code></pre>
    </details>

    <details>
      <summary><code>LiquidCrystal_I2C.cpp</code></summary>
      <pre><code class="language-cpp">/**** Minimal LCD driver (excerpt) ****/
#include "LiquidCrystal_I2C.h"
#include &lt;Wire.h&gt;

void LiquidCrystal_I2C::init() {
  Wire.begin();
  _expanderWrite(0x00);
  delay(50);
  // 4‚Äëbit init sequence ‚Ä¶
}
void LiquidCrystal_I2C::backlight() { _backlightval = 0x08; _expanderWrite(0); }
void LiquidCrystal_I2C::noBacklight() { _backlightval = 0x00; _expanderWrite(0); }
// [ full implementation continues ‚Ä¶ ]
</code></pre>
    </details>

    <details>
      <summary><code>LiquidCrystal_I2C.h</code></summary>
      <pre><code class="language-cpp">#pragma once
#include &lt;Print.h&gt;

class LiquidCrystal_I2C : public Print {
 public:
  LiquidCrystal_I2C(uint8_t addr, uint8_t cols, uint8_t rows);
  void init();
  void backlight();
  void noBacklight();
  // ‚Ä¶ other API
 private:
  uint8_t _addr, _cols, _rows, _backlightval;
  void _expanderWrite(uint8_t);
};
/* EOF */
</code></pre>
    </details>

  </section>
</main>

<footer>
  <p>¬© 2025 Matthew Dubea ‚Äî source code</p>
</footer>
</body>
</html>
